<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Mutual Fund Portfolio Analyzer - Analyze your portfolio or get AI-suggested diversified mutual fund recommendations.">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8RSFJGFF8B"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-8RSFJGFF8B');
    </script>

    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>Portfolio Analyzer - SIPWise | Plan your SIP. Predict your future.</title>

    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=JetBrains+Mono:wght@400;600&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="portfolio-style.css">
    <link rel="stylesheet" href="onboarding.css">
</head>

<body data-theme="light">
    <header>
        <div class="header-content">
            <h1>
                <a href="index.html"
                    style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 12px;">
                    <div class="logo">‚Çπ</div>
                    SIPWise
                </a>
            </h1>
            <nav class="main-nav">
                <a href="index.html">Calculator</a>
                <a href="portfolio.html" class="active">Portfolio</a>
                <a href="pricing.html">Pricing</a>
                <a href="about.html">About</a>
                <a href="contact.html">Contact</a>
            </nav>
            <div class="header-controls">
                <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()">üåô</button>
                <button class="restart-tutorial-btn" onclick="restartPortfolioOnboarding()">
                    <span>üéØ</span> Tutorial
                </button>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="disclaimer">
            <strong>‚ö†Ô∏è Important Disclaimer</strong>
            Mutual fund investments are subject to market risks. NAV data is sourced from publicly available AMFI data
            via MFAPI.in. Returns are calculated based on historical NAVs. Past performance does not guarantee future
            results. Please consult a SEBI registered financial advisor before making investment decisions. This tool is
            for educational purposes only and does not constitute financial advice.
        </div>

        <div class="page-header">
            <h1 class="page-title">Mutual Fund Portfolio Analyzer</h1>
            <p class="page-subtitle">Analyze your existing portfolio or get AI-powered diversified recommendations</p>
        </div>

        <!-- Mode Selector -->
        <div class="mode-selector">
            <button class="mode-btn active" onclick="switchMode('manual')">
                <div class="mode-icon">üìä</div>
                <div>
                    <h3>Manual Mode</h3>
                    <p>Analyze your own portfolio</p>
                </div>
            </button>
            <button class="mode-btn" onclick="switchMode('auto')">
                <div class="mode-icon">ü§ñ</div>
                <div>
                    <h3>Auto Mode</h3>
                    <p>Get AI-suggested portfolio</p>
                </div>
            </button>
        </div>

        <!-- MANUAL MODE SECTION -->
        <div id="manualMode" class="mode-content active">
            <div class="analyzer-grid">
                <!-- Left Panel - Fund Selection -->
                <div>
                    <div class="card">
                        <div class="card-title">üîç Build Your Portfolio</div>

                        <!-- Portfolio Settings -->
                        <div class="form-group">
                            <label>Total Monthly Budget</label>
                            <input type="number" id="totalBudget" value="10000" min="500" placeholder="‚Çπ10,000">
                        </div>

                        <div class="form-group">
                            <label>Investment Horizon (Years)</label>
                            <input type="range" id="portfolioTenure" min="1" max="30" value="10"
                                oninput="updatePortfolioValue('portfolioTenure')">
                            <div class="value-display">
                                <span id="portfolioTenureDisplay">10</span> Years
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="checkbox-group" onclick="toggleEqualSplit()">
                                <input type="checkbox" id="equalSplit" checked>
                                <label>Equal Split Across Funds</label>
                            </div>
                        </div>

                        <hr style="margin: 24px 0; border: none; border-top: 1px solid var(--border);">

                        <!-- Fund List -->
                        <div class="fund-list" id="fundList">
                            <!-- Funds will be rendered here -->
                        </div>

                        <button class="btn btn-primary" onclick="showFundSearchModal()"
                            style="width: 100%; margin-top: 16px;">
                            ‚ûï Add Fund (Max 10)
                        </button>

                        <button class="btn btn-secondary" onclick="analyzeManualPortfolio()"
                            style="width: 100%; margin-top: 12px;">
                            üìä Analyze Portfolio
                        </button>
                    </div>
                </div>

                <!-- Right Panel - Analysis Results -->
                <div>
                    <div class="card">
                        <div class="card-title">üìà Portfolio Analysis</div>

                        <div id="portfolioResults" class="portfolio-results">
                            <div class="empty-state">
                                <div class="empty-icon">üìã</div>
                                <h3>No Portfolio Yet</h3>
                                <p>Add mutual funds to start analyzing your portfolio</p>
                            </div>
                        </div>
                    </div>

                    <div class="card" id="detailedAnalysis" style="margin-top: 20px; display: none;">
                        <div class="card-title">üìä Detailed Breakdown</div>
                        <div id="detailedResults"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AUTO MODE SECTION -->
        <div id="autoMode" class="mode-content">
            <div class="analyzer-grid">
                <!-- Left Panel - Preferences -->
                <div>
                    <div class="card">
                        <div class="card-title">üéØ Your Investment Profile</div>

                        <div class="form-group">
                            <label>Monthly Investment Budget</label>
                            <input type="number" id="autoBudget" value="10000" min="500" placeholder="‚Çπ10,000">
                        </div>

                        <div class="form-group">
                            <label>Investment Horizon</label>
                            <input type="range" id="autoTenure" min="1" max="30" value="10"
                                oninput="updatePortfolioValue('autoTenure')">
                            <div class="value-display">
                                <span id="autoTenureDisplay">10</span> Years
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Risk Tolerance</label>
                            <div class="risk-selector">
                                <button class="risk-btn" data-risk="low" onclick="selectRisk('low')">
                                    <span>üõ°Ô∏è</span>
                                    <span>Low</span>
                                    <small>Stable & Safe</small>
                                </button>
                                <button class="risk-btn active" data-risk="medium" onclick="selectRisk('medium')">
                                    <span>‚öñÔ∏è</span>
                                    <span>Medium</span>
                                    <small>Balanced</small>
                                </button>
                                <button class="risk-btn" data-risk="high" onclick="selectRisk('high')">
                                    <span>üöÄ</span>
                                    <span>High</span>
                                    <small>Growth Focused</small>
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Expected Return (%)</label>
                            <input type="range" id="autoExpectedReturn" min="6" max="20" value="12" step="0.5"
                                oninput="updatePortfolioValue('autoExpectedReturn')">
                            <div class="value-display">
                                <span id="autoExpectedReturnDisplay">12</span>%
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Investment Style</label>
                            <div class="slider-container">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="font-size: 12px; color: var(--text-secondary);">Stability</span>
                                    <span style="font-size: 12px; color: var(--text-secondary);">Growth</span>
                                </div>
                                <input type="range" id="styleSlider" min="0" max="100" value="50">
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="checkbox-group" onclick="toggleTaxSaving()">
                                <input type="checkbox" id="taxSaving">
                                <label>Include ELSS (Tax Saving)</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="checkbox-group" onclick="toggleNFO()">
                                <input type="checkbox" id="includeNFO">
                                <label>Include New Fund Offers (NFO)</label>
                            </div>
                        </div>

                        <button class="btn btn-primary" onclick="generateAutoPortfolio()"
                            style="width: 100%; margin-top: 24px;">
                            ü§ñ Generate Portfolio
                        </button>
                    </div>
                </div>

                <!-- Right Panel - Suggested Portfolio -->
                <div>
                    <div class="card">
                        <div class="card-title">üéØ Suggested Portfolio</div>

                        <div id="autoPortfolioResults" class="portfolio-results">
                            <div class="empty-state">
                                <div class="empty-icon">ü§ñ</div>
                                <h3>Ready to Build Your Portfolio?</h3>
                                <p>Fill in your preferences and click "Generate Portfolio" to get AI-powered
                                    recommendations</p>
                            </div>
                        </div>
                    </div>

                    <div class="card" id="autoDetailedAnalysis" style="margin-top: 20px; display: none;">
                        <div class="card-title">üí° Why These Funds?</div>
                        <div id="autoRationale"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>SIPWise</h4>
                <p style="font-size: 14px; color: var(--text-secondary); margin-top: 8px;">Plan your SIP. Predict your
                    future.</p>
            </div>

            <div class="footer-section">
                <h4>Product</h4>
                <ul class="footer-links">
                    <li><a href="index.html">Calculator</a></li>
                    <li><a href="portfolio.html">Portfolio Analyzer</a></li>
                    <li><a href="pricing.html">Pricing</a></li>
                    <li><a href="about.html">About</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Support</h4>
                <ul class="footer-links">
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="privacy.html">Privacy Policy</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Legal & Data Source</h4>
                <p style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                    NAV data sourced from publicly available AMFI data via <a href="https://www.mfapi.in/"
                        target="_blank" style="color: var(--primary);">MFAPI.in</a>.
                    This tool is for educational purposes only. Please consult a SEBI registered financial advisor
                    before making investment decisions.
                </p>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2025 SIPWise. All rights reserved.</p>
            <p style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                Last Updated: January 2025 | Fund data from AMFI via MFAPI.in
            </p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="portfolio-onboarding-fixed.js"></script>
    <script src="portfolio-script.js"></script>
    <script src="portfolio-enhancements.js"></script>
</body>

</html>